<!DOCTYPE html>
<html>
<head>
	<title>The Great Game</title>
	<link rel="stylesheet" href="style.css">
	<link rel="icon" type="image/x-icon" href="icon.png">
</head>
<body>
	<div class="header">
		<div class="title">The Great Game</div>
	</div>
	<div class="content">
		<div class="option" id="option">
			<img src="images/Path.png"></img>
			<div class="description">Loading...</div>
			<div class="buttons">
				<button type="button" onclick="selectOption('1')" class="left">Option 1</button>
				<button type="button" onclick="selectOption('2')" class="right">Option 2</button>
			</div>
			<div class="endgame">
				<div>Ending:</div>
				<div class="endingname">The Goblin Ending!</div>
				<button type="button" onclick="restart()" class="restart-button">Restart</button>
			</div>
		</div>
	</div>
	<script>
		const option = document.getElementById("option");
		const image = option.children[0];
		const description = option.children[1];
		const buttons = option.children[2]
		const button1 = buttons.children[0];
		const button2 = buttons.children[1];
		const endgame = option.children[3];
		const endingname = endgame.children[1];
		
		let gameState = "S";
		let options = {};
		
		getOptions();
		async function getOptions() {
			let x = await fetch("options.json");
			let y = await x.json();
			options = y;
			selectOption("");
		}
		function selectOption(num) {
			gameState = gameState+num;
			description.innerHTML = options[gameState]["description"];
			image.style.display = "none";
			image.src = "images/"+options[gameState]["image"]+".png";
			image.style.display = "inline";
			if (options[gameState]["option1"] == undefined) {
				buttons.style.display = "none";
				endgame.style.display = "block";
				endingname.innerHTML = options[gameState]["ending"];
			} else {
				buttons.style.display = "block";
				endgame.style.display = "none";
				button1.innerHTML = options[gameState]["option1"];
				button2.innerHTML = options[gameState]["option2"];
			}
		}
		function restart() {
			gameState = "S";
			selectOption("");
		}
	</script>
</body>
</html>